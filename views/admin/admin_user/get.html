{{template "admin/public/header.html" .}}
    <div class="wrapper wrapper-content">
                <form action="/admin/admin{{if .is_put}}/{{.info.Admin.Aid}}{{end}}" method="post" class="form-horizontal" id="thatForm">
                    <input type="hidden" name="_method" value="{{._method}}" />
                <div class="row">
                    <div class="col-lg-12">
                        <div class="ibox float-e-margins">
                            <div class="ibox-title">
                                <h5>管理员</h5>
                                <div class="ibox-tools">
                                    <button class="btn btn-primary btn-xs save" type="button">提交</button>
                                    <button class="btn btn-white btn-xs" type="reset">取消</button>
                                    <a class="collapse-link">
                                        <i class="fa fa-chevron-up"></i>
                                    </a>
                                    <a class="dropdown-toggle" data-toggle="dropdown" href="form_editors.html#">
                                        <i class="fa fa-wrench"></i>更多
                                    </a>
                                    <ul class="dropdown-menu dropdown-user">
                                        <li><a>选项2</a>
                                        </li>
                                    </ul>
                                    <a class="close-link">
                                        <i class="fa fa-times"></i>
                                    </a>
                                </div>
                            </div>
                            <div class="ibox-content">
                                <div class="tabs-container">
                                    <ul class="nav nav-tabs">
                                        <li class="active"><a data-toggle="tab" href="#tab-basic" aria-expanded="true">基本</a>
                                        </li>
                                        <li class=""><a data-toggle="tab" href="#tab-status" aria-expanded="false">状态</a>
                                        </li>
                                        <li class=""><a data-toggle="tab" href="#tab-tel" aria-expanded="false">联系方式</a>
                                        </li>
                                        <li class=""><a data-toggle="tab" href="#tab-remark" aria-expanded="false">备注</a>
                                        </li>
                                    </ul>
                                    <div class="tab-content">
                                        <div id="tab-basic" class="tab-pane active">
                                            <div class="hr-line-dashed"></div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label">用户名：</label>
                                                <div class="col-sm-8">
                                                    <input name="username" class="form-control" type="text" value="{{.info.Username}}">
                                                </div>
                                            </div>
                                            <div class="hr-line-dashed"></div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label">密码：</label>
                                                <div class="col-sm-8">
                                                    <input id="password" name="password" class="form-control" type="password">
                                                </div>
                                            </div>
                                            <div class="hr-line-dashed"></div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label">确认密码：</label>
                                                <div class="col-sm-8">
                                                    <input id="confirm_password" name="confirm_password" class="form-control" type="password">
                                                    <span class="help-block m-b-none"><i class="fa fa-info-circle"></i> 请再次输入您的密码</span>
                                                </div>
                                            </div>
                                            <div class="hr-line-dashed"></div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label">邮箱：</label>
                                                <div class="col-sm-8">
                                                    <input name="mail" class="form-control" type="email" value="{{.info.Mail}}">
                                                </div>
                                            </div>
                                            <div class="hr-line-dashed"></div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label">真实姓名：</label>
                                                <div class="col-sm-8">
                                                    <input name="true_name" class="form-control" type="text" value="{{.info.TrueName}}">
                                                </div>
                                            </div>
                                            <div class="hr-line-dashed"></div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label">昵称：</label>
                                                <div class="col-sm-8">
                                                    <input name="nick_name" class="form-control" type="text" value="{{.info.TrueName}}">
                                                </div>
                                            </div>
                                            <div class="hr-line-dashed"></div>
                                        </div>
                                        <div id="tab-status" class="tab-pane">
                                            <div class="panel-body">
                                                <div class="hr-line-dashed"></div>
                                                <div class="form-group">
                                                    <label class="col-sm-2 control-label">删除
                                                    </label>

                                                    <div class="col-sm-10">
                                                        <div class="switch">
                                                            <div class="onoffswitch">
                                                                <input type="checkbox"  class="onoffswitch-checkbox" name="is_del" value="1" id="is_del" {{if eq .info.IsDel 1}}checked{{end}}>
                                                                <label class="onoffswitch-label" for="is_del">
                                                                    <span class="onoffswitch-inner"></span>
                                                                    <span class="onoffswitch-switch"></span>
                                                                </label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="hr-line-dashed"></div>
                                                <div class="form-group">
                                                    <label class="col-sm-3 control-label">注册时间：</label>
                                                    <div class="col-sm-8">
                                                        {{.info.TimeAdd}}
                                                    </div>
                                                </div>
                                                <div class="hr-line-dashed"></div>
                                            </div>
                                        </div>
                                        <div id="tab-tel" class="tab-pane">
                                            <div class="panel-body">
                                                <div class="hr-line-dashed"></div>
                                                <div class="form-group">
                                                    <label class="col-sm-2 control-label">qq
                                                    </label>
                                                    <div class="col-sm-10">
                                                        <input type="text" class="form-control" name="qq" value="{{.info.Qq}}">
                                                    </div>
                                                </div>
                                                <div class="hr-line-dashed"></div>
                                                <div class="form-group">
                                                    <label class="col-sm-2 control-label">电话
                                                    </label>
                                                    <div class="col-sm-10">
                                                        <input type="text" class="form-control" name="phone" value="{{.info.Phone}}">
                                                    </div>
                                                </div>
                                                <div class="hr-line-dashed"></div>
                                                <div class="form-group">
                                                    <label class="col-sm-2 control-label">手机号
                                                    </label>
                                                    <div class="col-sm-10">
                                                        <input type="text" class="form-control" name="mobile" value="{{.info.Mobile}}">
                                                    </div>
                                                </div>
                                                <div class="hr-line-dashed"></div>
                                            </div>
                                        </div>
                                        <div id="tab-remark" class="tab-pane">
                                            <div class="panel-body">
                                                <div class="form-group">
                                                    <label class="col-sm-2 control-label">备注：</label>
                                                    <div class="col-sm-10">
                                                        <textarea name="remark" class="form-control" style="min-height: 200px">{{.info.Remark}}</textarea>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                </form>
            </div>
    </div>
{{template "admin/public/footer.html" .}}

<link href="{{.__theme__}}css/plugins/switchery/switchery.css" rel="stylesheet">
<script src="{{.__theme__}}js/plugins/switchery/switchery.js"></script>
<!-- iCheck -->
<link href="{{.__theme__}}css/plugins/iCheck/custom.css" rel="stylesheet">
<script src="{{.__theme__}}js/plugins/iCheck/icheck.min.js"></script>
<!-- Tags -->
<script src="{{.__static__}}plugin/bootstrap-tagsinput/dist/bootstrap-tagsinput.min.js"></script>
<link href="{{.__static__}}plugin/bootstrap-tagsinput/dist/bootstrap-tagsinput.css" rel="stylesheet">
<script src="{{.__theme__}}js/plugins/validate/jquery.validate.min.js"></script>
<script src="{{.__theme__}}js/plugins/validate/messages_zh.min.js"></script>
<script>
    var blog_id="{{if .is_put}}{{.info.Admin.Aid}}{{else}}0{{end}}";
    var layerID;
    //禁止 回车 表单保存
    //        document.getElementsByTagName('form')[0].onkeydown = function(e){
    //            var e = e || event;
    //            var keyNum = e.which || e.keyCode;
    //            return keyNum==13 ? false : true;
    //        };

    $(document).ready(function () {
        $('.i-checks').iCheck({
            checkboxClass: 'icheckbox_square-green',
            radioClass: 'iradio_square-green',
        });
        //保存
        $('.save').click(function () {
            $('#thatForm').submit();
        });
        //保存
        $('#thatForm').submit(function (e) {
            e.preventDefault();
            var btn=$('.btn');

            var $this=$(this);
            $this.serialize();
            var pwd=$('password').value()
            var pwd2=$('confirm_password').value()
            if(pwd){
                if(!pwd2){
                    layer.alert("确认密码不能为空",{ icon:2});
                    return false
                }
                if(pwd!=pwd2){
                    layer.alert("两次输入的密码不一致",{ icon:2});
                    return false
                }
            }
            btn.attr('disabled',true);
            //加载层
            var loading = layer.load(0, {shade: false}); //0代表加载的风格，支持0-2
            $.ajax({
                url:$this.attr('action'),
                data:$this.serialize(),
                dataType:'json',
                method:"{{._method}}"
            }).done(function (data) {
                layer.close(loading);
                console.log(data)
                if(data.code==1){
                    layer.alert(data.info,{ icon:1});
                    setTimeout(function () {
//                        window.location.reload()
                    },3000)
                }else{
                    layer.alert(data.info,{ icon:2});

                }
                btn.attr('disabled',false);
            }).fail(function(){ alert("系统错误"); });
            return false;
        });
    });
</script>
</body>
</html>